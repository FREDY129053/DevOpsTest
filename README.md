# ะัะพะตะบั: Python + TortoiseORM + PostgreSQL

## ๐๏ธ ะกัะตะบ
- **FastAPI** โ ะฑัััััะน ะฒะตะฑ-ััะตะนะผะฒะพัะบ ะดะปั Python
- **Tortoise** ORM โ ะฐัะธะฝััะพะฝะฝัะน ORM
- **PostgreSQL** โ ัะตะปััะธะพะฝะฝะฐั ะกะฃะะ
- **Docker + Docker Compose** (ะฒะตััะธั ะฟัะพะตะบัะฐ: Docker 28.3.1, build 38b7060)

---

## 1. ะขัะตะฑะพะฒะฐะฝะธั ะบ ะพะบััะถะตะฝะธั
- Docker โฅ 28.3.1 (build 38b7060)
- Docker Compose (ะฒ ัะพััะฐะฒะต Docker-ะบะปะธะตะฝัะฐ ะธะปะธ ะบะฐะบ ะพัะดะตะปัะฝัะน ะธะฝััััะผะตะฝั)

---

## 2. ๐ ะัััััะน ััะฐัั

```bash
cp .env.example .env
docker compose up --build
```

## 3. ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
```
curl -s localhost:8080/health
```
(ะพะถะธะดะฐะตััั ะฝะพัะผะฐะปัะฝัะน ะพัะฒะตั: {"status":"work"})

## 4. ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ
### ะะพะฑะฐะฒะธัั ัะพะฒะฐั
```
curl -X 'POST' \
  'http://localhost:8080/api/v1/items/add' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "name": "string",
  "price": 100
}'
```

### ะะพะปััะธัั ััะฐัะธััะธะบั
```
curl -X 'GET' \
  'http://localhost:8080/api/v1/items/stats' \
  -H 'accept: application/json'
```
ะัะธ ะฟัััะพะน ะฑะฐะทะต `price` ะฒะพะทะฒัะฐัะฐะตััั ะบะฐะบ **0**.

## 5. ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ะผะพะถะฝะพ ะฐะดะฐะฟัะธัะพะฒะฐัั ะฟะพะด ัะฒะพะธ)
ะคะฐะนะป .env.example ะดะพะปะถะตะฝ ัะพะดะตัะถะฐัั:
```env
# ะขะธะฟ ะพะบััะถะตะฝะธั (dev | prod). ะะพะถะฝะพ ะฝะต ัะบะฐะทัะฒะฐัั ะธ ะฑัะดะตั prod
ENV_TYPE=prod

# --- ะกะตัะตะฒัะต ะฝะฐัััะพะนะบะธ ัะตัะฒะตัะฐ ---
# SERVER_HOST โ ะพะฑััะฝะพ 0.0.0.0 (ะฒัะต ะธะฝัะตััะตะนัั) ะธะปะธ localhost (127.0.0.1) ะดะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ
SERVER_HOST=0.0.0.0

# ะะพัั ะดะปั ะฟัะธะปะพะถะตะฝะธั
SERVER_PORT=8080

# --- PostgreSQL ---
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST=main_db
POSTGRES_PORT=5432
POSTGRES_DB=test
```

## 6. ะะฐะฟััะบ ัะตััะพะฒ ะปะพะบะฐะปัะฝะพ
ะกะพะทะดะฐัั ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต ะฒ `app` ะธ ะทะฐะฟัััะธัั ัะตัะตะท Python ะธะปะธ
```
cd app && uv run pytest
```
ะะฐะถะดัะน ัะตัั ัะพะทะดะฐัั ัะฒะพั ะพัะดะตะปัะฝัั ะฑะฐะทั ะดะฐะฝะฝัั, ะฟะพััะพะผั ะผะพะถะฝะพ ะฝะต ะฑะตัะฟะพะบะพะธัััั ะพ ะบะพะฝัะปะธะบัะต ะดะฐะฝะฝัั โ ะฒัั ะธะทะพะปะธัะพะฒะฐะฝะพ ะธ ะฑะตะทะพะฟะฐัะฝะพ.

## 7. ะกัััะบัััะฐ ะฟัะพะตะบัะฐ
```bash
.
โโโ app
โ   โโโ Dockerfile
โ   โโโ main.py  # ะคะฐะนะป ะทะฐะฟััะบะฐ
โ   โโโ migrations # ะะธะณัะฐัะธะธ
โ   โ   โโโ models
โ   โ       โโโ 1_20250909183622_None.py
โ   โโโ pyproject.toml
โ   โโโ setup.cfg
โ   โโโ src
โ   โ   โโโ api  # ะกะฑะพัะบะฐ API
โ   โ   โ   โโโ middlewares  # Middlewares ะฟัะพะตะบัะฐ
โ   โ   โ   โ   โโโ logging.py
โ   โ   โ   โโโ routers  # ะะพััะตัั ะฟัะพะตะบัะฐ
โ   โ   โ       โโโ __init__.py
โ   โ   โ       โโโ item_router.py
โ   โ   โโโ config  # ะะพะฝัะธะณ ะฟัะพะตะบัะฐ(ะทะฐะณััะทะบะฐ ะธ ะฒะฐะปะธะดะฐัะธั env ะฟะตัะตะผะตะฝะฝัั)
โ   โ   โ   โโโ load_env.py
โ   โ   โโโ db  # ะะฐะทะฐ ะดะฐะฝะฝัั
โ   โ   โ   โโโ config.py  # ะะพะฝัะธะณ ะะ ะดะปั ะผะธะณัะฐัะธะน
โ   โ   โ   โโโ __init__.py  # ะะฝะธัะธะฐะปะธะทะฐัะธั ะะ
โ   โ   โ   โโโ models  # ะะพะดะตะปะธ ะฒ ะะ(ัะฐะฑะปะธัั)
โ   โ   โ       โโโ __init__.py
โ   โ   โ       โโโ items.py
โ   โ   โโโ repository  # ะะตะฟะพะทะธัะพัะธ ะดะปั ะฒะทะฐะธะผะพะดะตะนััะฒะธั ั ะะ
โ   โ   โ   โโโ item.py
โ   โ   โโโ schemas  # ะกัะตะผั ะฒัะพะดะพะฒ/ะพัะฒะตัะพะฒ API
โ   โ   โ   โโโ item.py
โ   โ   โ   โโโ msg.py
โ   โ   โโโ server.py  # ะกะฑะพัะบะฐ ะฟัะธะปะพะถะตะฝะธั
โ   โ   โโโ service  # ะกะตัะฒะธั
โ   โ       โโโ item.py
โ   โโโ tests  # ะะฐะฟะบะฐ ั ัะตััะฐะผะธ
โ   โ   โโโ conftest.py
โ   โ   โโโ __init__.py
โ   โ   โโโ test_add.py
โ   โ   โโโ test_stats.py
โ   โโโ uv.lock
โโโ docker-compose.yaml
โโโ README.md
```
